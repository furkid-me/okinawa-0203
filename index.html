<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="2026 æ²–ç¹©å®¶æ—æ—…éŠå…¨èƒ½æ‰‹å†Š - è¡Œç¨‹è¦åŠƒã€æ·±å¤œæ¢ç´¢ã€å¿…è²·æ¸…å–®ã€åŒ¯ç‡æ›ç®—ã€è¡Œå‰æº–å‚™ã€æ—…è²»è¨˜å¸³">
    <meta name="theme-color" content="#075985">
    <title>2026 æ²–ç¹©å®¶æ—æ—…éŠå…¨èƒ½æ‰‹å†Š - çµ‚æ¥µå¤§è£œå¸–ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
            font-weight: 500;
        }

        /* Navigation styles */
        .nav-btn.active {
            color: #0369a1;
            border-top: 3px solid #0369a1;
            background-color: #f0f9ff;
        }
        .nav-btn.active i {
            color: #0369a1;
            transform: scale(1.1);
        }
        .nav-btn {
            transition: all 0.2s ease;
        }

        /* Day tab styles */
        .day-tab.active {
            background-color: #075985;
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        /* Collapsible content animation */
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .collapsible-content.show {
            max-height: 5000px;
        }

        /* Tab content visibility */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hide number input spinners */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Checkbox item styling */
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background-color: #fff;
            padding: 14px;
            border-radius: 16px;
            font-size: 14px;
            border: 1px solid #f1f5f9;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .checkbox-item:hover {
            background-color: #f8fafc;
        }
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Badge styles */
        .badge-kid {
            background-color: #dcfce7;
            color: #166534;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 99px;
            font-weight: bold;
        }
        .badge-late {
            background-color: #fef2f2;
            color: #991b1b;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 99px;
            font-weight: bold;
        }

        /* Gradient backgrounds */
        .gradient-blue {
            background: linear-gradient(135deg, #075985 0%, #0369a1 100%);
        }
        .gradient-night {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
        }
        .gradient-pink {
            background: linear-gradient(135deg, #be185d 0%, #db2777 100%);
        }

        /* Card hover effects */
        .card-hover {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgb(0 0 0 / 0.1);
        }

        /* Button active state */
        .btn-active:active {
            transform: scale(0.95);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
    </style>
</head>
<body class="pb-24 text-slate-800">

    <!-- Header -->
    <header class="gradient-blue text-white p-6 shadow-xl sticky top-0 z-50">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div>
                <h1 id="page-title" class="text-xl font-bold tracking-tight">æ²–ç¹©æ·±åº¦ä¹‹æ—…</h1>
                <p class="text-sky-200 text-xs font-medium">2026/02/15 - 02/18 | å®¶æ—å…¨èƒ½æ‰‹å†Š</p>
            </div>
            <div class="text-right">
                <span class="text-[10px] bg-white/20 px-3 py-1 rounded-full backdrop-blur-md border border-white/30 font-bold">6å¤§1å° | è‡ªé§•å°ˆç”¨</span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 mt-6">

        <!-- Tab 1: Itinerary (è¡Œç¨‹) -->
        <div id="tab-itinerary" class="tab-content active">
            <!-- Flight & Critical Timeline -->
            <div class="bg-white rounded-3xl p-5 shadow-md border border-slate-100 mb-6 card-hover">
                <h3 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                    <i class="fas fa-clock text-sky-600"></i> é—œéµèˆªç­èˆ‡äº¤é€šæ™‚ç¨‹
                </h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-sky-50 p-3 rounded-2xl border border-sky-100 shadow-sm">
                        <p class="text-[10px] text-sky-700 font-bold mb-1">D1 å‡ºç™¼ äºèˆª</p>
                        <p class="text-xs font-bold text-slate-800 italic">09:00 æ¥é§è»Šé›†åˆ</p>
                        <p class="text-xs font-bold text-sky-600 mt-1">13:30 ğŸ›« 15:55 ğŸ›¬</p>
                    </div>
                    <div class="bg-red-50 p-3 rounded-2xl border border-red-100 shadow-sm">
                        <p class="text-[10px] text-red-700 font-bold mb-1">D4 å›ç¨‹ è™èˆª</p>
                        <p class="text-xs font-bold text-red-600 italic">19:00 æ»¿æ²¹é‚„è»ŠæœŸé™</p>
                        <p class="text-xs font-bold text-slate-800 mt-1">21:30 ğŸ›« 21:55 ğŸ›¬</p>
                    </div>
                </div>
            </div>

            <!-- Day Tabs -->
            <div class="flex justify-between gap-2 mb-6 bg-white p-2 rounded-2xl shadow-sm border border-slate-100">
                <button onclick="showDay(1)" id="day-1" class="day-tab flex-1 py-3 rounded-xl font-bold text-slate-400 transition-all active">D1</button>
                <button onclick="showDay(2)" id="day-2" class="day-tab flex-1 py-3 rounded-xl font-bold text-slate-400 transition-all">D2</button>
                <button onclick="showDay(3)" id="day-3" class="day-tab flex-1 py-3 rounded-xl font-bold text-slate-400 transition-all">D3</button>
                <button onclick="showDay(4)" id="day-4" class="day-tab flex-1 py-3 rounded-xl font-bold text-slate-400 transition-all">D4</button>
            </div>
            <div id="itinerary-list" class="space-y-6"></div>
        </div>

        <!-- Tab 2: Nightlife (æ·±å¤œæ¢ç´¢) -->
        <div id="tab-night" class="tab-content">
            <div class="gradient-night text-white p-6 rounded-3xl mb-6 shadow-lg relative overflow-hidden">
                <div class="relative z-10">
                    <h3 class="font-bold flex items-center gap-2 mb-2 text-lg">
                        <i class="fas fa-moon text-yellow-400"></i> é‚£éœ¸æ·±å¤œæ¢éšªæŒ‡å—
                    </h3>
                    <p class="text-xs opacity-80 leading-relaxed">æ•´ç† 25 å€‹æ·±å¤œåœ°é»ï¼ŒåŒ…å« 24H è³¼ç‰©ã€ååº—é£Ÿå ‚èˆ‡ç”œé»ï¼Œå·²å…¨æ•¸è£œä¸Šå°èˆªé€£çµã€‚</p>
                </div>
                <i class="fas fa-city absolute -right-4 -bottom-4 text-white/10 text-8xl"></i>
            </div>

            <div class="space-y-8" id="night-categories">
                <section>
                    <p class="text-xs font-bold text-indigo-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-indigo-100 pb-1">
                        ğŸ›’ 24H è³¼ç‰©ã€è¶…å¸‚èˆ‡ç²¾å“ (10é¸)
                    </p>
                    <div class="grid grid-cols-1 gap-4" id="night-shopping"></div>
                </section>
                <section>
                    <p class="text-xs font-bold text-indigo-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-indigo-100 pb-1">
                        ğŸœ æ·±å¤œç¾é£Ÿèˆ‡åœ¨åœ°é£Ÿå ‚ (10é¸)
                    </p>
                    <div class="grid grid-cols-1 gap-4" id="night-food"></div>
                </section>
                <section>
                    <p class="text-xs font-bold text-indigo-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-indigo-100 pb-1">
                        ğŸ¦ æ·±å¤œç”œé»èˆ‡è£œçµ¦ (5é¸)
                    </p>
                    <div class="grid grid-cols-1 gap-4" id="night-dessert"></div>
                </section>
            </div>
        </div>

        <!-- Tab 3: Shopping (å¿…è²·) -->
        <div id="tab-shopping" class="tab-content">
            <div class="gradient-pink text-white p-6 rounded-3xl mb-6 shadow-lg">
                <h3 class="font-bold flex items-center gap-2 mb-2 text-lg">
                    <i class="fas fa-shopping-bag text-pink-200"></i> æ²–ç¹©å¿…è²·å®Œæ•´æŒ‡å—
                </h3>
                <p class="text-xs opacity-90 leading-relaxed">ç²¾é¸å„å¤§å“ç‰Œèˆ‡ 30 å¤§å¥½ç‰©ï¼šåŒ…å« Uniqloã€MUJIã€å¯µç‰©åº—å°ˆå€ã€‚</p>
            </div>

            <!-- Major Brands Section -->
            <div class="bg-white rounded-3xl p-6 shadow-sm border-2 border-pink-100 mb-8">
                <h4 class="text-pink-700 font-bold mb-4 flex items-center gap-2 text-sm">
                    <i class="fas fa-store-alt"></i> æŒ‡å®šå“ç‰Œèˆ‡å¯µç‰©å°ˆå€
                </h4>
                <div class="grid grid-cols-1 gap-4">
                    <div class="bg-pink-50 p-4 rounded-2xl flex justify-between items-center">
                        <div>
                            <p class="font-bold text-pink-900 text-xs">Uniqlo & GU (å¤§å‹åº—)</p>
                            <p class="text-[10px] text-pink-700">Aeon Rycom / é‚£éœ¸ Main Place</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=Uniqlo+Okinawa" target="_blank" rel="noopener" class="bg-white text-pink-700 px-3 py-1 rounded-lg text-[10px] font-bold border border-pink-200 btn-active">åœ°åœ–</a>
                    </div>
                    <div class="bg-pink-50 p-4 rounded-2xl flex justify-between items-center">
                        <div>
                            <p class="font-bold text-pink-900 text-xs">ç„¡å°è‰¯å“ MUJI (æ——è‰¦åº—)</p>
                            <p class="text-[10px] text-pink-700">é‚£éœ¸ Main Place / å¤©ä¹…æ¨‚å¸‚</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=MUJI+Okinawa" target="_blank" rel="noopener" class="bg-white text-pink-700 px-3 py-1 rounded-lg text-[10px] font-bold border border-pink-200 btn-active">åœ°åœ–</a>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-2xl flex justify-between items-center">
                        <div>
                            <p class="font-bold text-blue-900 text-xs">Pet Box (æ²–ç¹©æœ€å¼·å¯µç‰©åº—)</p>
                            <p class="text-[10px] text-blue-700">ç¾åœ‹æ‘å°é¢ (ç¾æ¿±åº—)</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=Pet+Box+Mihama" target="_blank" rel="noopener" class="bg-white text-blue-700 px-3 py-1 rounded-lg text-[10px] font-bold border border-blue-200 btn-active">åœ°åœ–</a>
                    </div>
                </div>
            </div>

            <div class="space-y-8" id="shopping-categories">
                <section>
                    <p class="text-xs font-bold text-pink-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-pink-100 pb-1">
                        <i class="fas fa-gift text-pink-500"></i> 1. å¿…è²·åœ¨åœ°ç‰¹ç”¢ (10é¸)
                    </p>
                    <div class="space-y-4" id="shop-special"></div>
                </section>
                <section>
                    <p class="text-xs font-bold text-pink-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-pink-100 pb-1">
                        <i class="fas fa-magic text-pink-500"></i> 2. è—¥å¦èˆ‡ä¿é¤Šå›¤è²¨ (10é¸)
                    </p>
                    <div class="grid grid-cols-2 gap-3" id="shop-pharmacy"></div>
                </section>
                <section>
                    <p class="text-xs font-bold text-pink-800 mb-4 flex items-center gap-2 uppercase tracking-widest border-b border-pink-100 pb-1">
                        <i class="fas fa-store text-pink-500"></i> 3. ä¾¿åˆ©å•†åº—é™å®š (10é¸)
                    </p>
                    <div class="grid grid-cols-1 gap-3" id="shop-conv"></div>
                </section>
            </div>
        </div>

        <!-- Tab 4: Calculator (åŒ¯ç‡) -->
        <div id="tab-calc" class="tab-content">
            <div class="bg-white rounded-3xl p-8 shadow-sm border border-slate-100">
                <h2 class="text-lg font-bold mb-8 flex items-center gap-2 text-sky-900">
                    <i class="fas fa-calculator text-sky-600"></i> å³æ™‚åŒ¯ç‡æ›ç®— (0.21)
                </h2>
                <div class="space-y-6">
                    <div>
                        <label class="text-xs font-bold text-slate-400 mb-2 block uppercase">æ—¥åœ“ JPY Â¥</label>
                        <input type="number" id="jpy-input" oninput="convert('jpy')"
                               class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl py-5 px-6 text-3xl font-bold text-sky-900 outline-none transition-all shadow-inner focus:border-sky-300 focus:bg-white"
                               placeholder="0" inputmode="numeric">
                    </div>
                    <div class="flex justify-center -my-3 relative z-10">
                        <div class="bg-white p-3 rounded-full border border-slate-100 shadow-sm text-sky-400">
                            <i class="fas fa-exchange-alt rotate-90 text-lg"></i>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs font-bold text-slate-400 mb-2 block uppercase">å°å¹£ TWD $</label>
                        <input type="number" id="twd-input" oninput="convert('twd')"
                               class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl py-5 px-6 text-3xl font-bold text-sky-900 outline-none transition-all shadow-inner focus:border-sky-300 focus:bg-white"
                               placeholder="0" inputmode="numeric">
                    </div>
                </div>

                <!-- Quick conversion reference -->
                <div class="mt-8 pt-6 border-t border-slate-100">
                    <p class="text-xs font-bold text-slate-400 mb-3 uppercase">å¿«é€Ÿæ›ç®—åƒè€ƒ</p>
                    <div class="grid grid-cols-3 gap-2 text-center text-xs">
                        <div class="bg-slate-50 p-3 rounded-xl">
                            <p class="text-slate-400">Â¥1,000</p>
                            <p class="font-bold text-sky-700">â‰ˆ $210</p>
                        </div>
                        <div class="bg-slate-50 p-3 rounded-xl">
                            <p class="text-slate-400">Â¥5,000</p>
                            <p class="font-bold text-sky-700">â‰ˆ $1,050</p>
                        </div>
                        <div class="bg-slate-50 p-3 rounded-xl">
                            <p class="text-slate-400">Â¥10,000</p>
                            <p class="font-bold text-sky-700">â‰ˆ $2,100</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 5: Prep (æº–å‚™) -->
        <div id="tab-prep" class="tab-content">
            <div class="grid grid-cols-1 gap-4 mb-8">
                <div class="gradient-blue rounded-3xl p-6 text-white shadow-lg">
                    <h3 class="font-bold flex items-center gap-2 mb-4 text-sm">
                        <i class="fas fa-cloud-sun"></i> 2æœˆ æ²–ç¹©æ°£å€™é å ±
                    </h3>
                    <div class="flex justify-between items-center mb-4">
                        <p class="text-4xl font-bold">18Â°C</p>
                        <i class="fas fa-wind text-3xl opacity-40"></i>
                    </div>
                    <p class="text-[11px] opacity-90 leading-relaxed italic">åœ°é™ªæé†’ï¼š2æœˆé¢¨å¤§é«”æ„Ÿæ¶¼ã€‚æ´‹è”¥å¼ç©¿æ³•æœ€ä¿éšªã€‚</p>
                </div>
            </div>

            <div class="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 space-y-8">
                <h3 class="font-bold text-slate-800 text-xl flex items-center gap-2">
                    <i class="fas fa-clipboard-check text-sky-600"></i> è¡Œææ¸…å–®å…¨é¢ç›¤é»
                </h3>

                <section>
                    <p class="text-xs font-bold text-sky-700 mb-4 border-b pb-2 uppercase tracking-widest">
                        ğŸªª é‡è¦è­‰ä»¶ (è‡ªé§•å¿…å‚™)
                    </p>
                    <div class="grid grid-cols-1 gap-2">
                        <label class="checkbox-item"><input type="checkbox"> è­·ç…§æ­£æœ¬ (æ•ˆæœŸåŠå¹´ä»¥ä¸Š)</label>
                        <label class="checkbox-item text-red-600"><input type="checkbox"> å°ç£é§•ç…§æ­£æœ¬ (å…©å°è»Šéƒ½è¦å¸¶)</label>
                        <label class="checkbox-item text-red-600"><input type="checkbox"> æ—¥æ–‡è­¯æœ¬é§•ç…§ (ç›£ç†ç«™ç”³è«‹)</label>
                        <label class="checkbox-item"><input type="checkbox"> é£¯åº— & ç§Ÿè»Šé ç´„æˆªåœ–</label>
                    </div>
                </section>

                <section>
                    <p class="text-xs font-bold text-sky-700 mb-4 border-b pb-2 uppercase tracking-widest">
                        ğŸ§¥ å¤§äººç©¿æ­èˆ‡é…ä»¶
                    </p>
                    <div class="grid grid-cols-1 gap-2">
                        <label class="checkbox-item"><input type="checkbox"> é˜²é¢¨æ½‘æ°´å¤–å¥— (å¿…å‚™)</label>
                        <label class="checkbox-item"><input type="checkbox"> èˆ’é©èµ°è·¯é‹ (é‹å‹•é‹)</label>
                        <label class="checkbox-item"><input type="checkbox"> å¤ªé™½çœ¼é¡ (é§•è»Šåˆºçœ¼)</label>
                        <label class="checkbox-item"><input type="checkbox"> è¡Œå‹•é›»æºèˆ‡å……é›»ç·šçµ„</label>
                    </div>
                </section>

                <section>
                    <p class="text-xs font-bold text-pink-600 mb-4 border-b border-pink-100 pb-2 uppercase tracking-widest">
                        ğŸ§¸ 6 æ­²å°å­©å°ˆå±¬
                    </p>
                    <div class="grid grid-cols-1 gap-2">
                        <label class="checkbox-item border-pink-50"><input type="checkbox"> å‚™ç”¨è—¥ (é€€ç‡’/æ­¢ç€‰/æ„Ÿå†’)</label>
                        <label class="checkbox-item border-pink-50"><input type="checkbox"> å°å­©é¤å…·ã€æ°´å£ºã€æ¿•ç´™å·¾</label>
                        <label class="checkbox-item border-pink-50"><input type="checkbox"> é›¢ç·šå½±éŸ³å¹³æ¿/å®‰æ’«ç©å…·</label>
                    </div>
                </section>
            </div>
        </div>

        <!-- Tab 6: Expenses (è¨˜å¸³) -->
        <div id="tab-expenses" class="tab-content">
            <div class="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 mb-6">
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1">ç›®å‰æ—…è²»ç¸½é–‹éŠ·</p>
                        <p class="text-4xl font-bold text-sky-900" id="total-expense">Â¥ 0</p>
                        <p class="text-xs text-slate-400 mt-1" id="total-twd">â‰ˆ NT$ 0</p>
                    </div>
                    <button onclick="toggleExpenseForm()" class="bg-sky-700 text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transition-all btn-active" aria-label="æ–°å¢æ”¯å‡º">
                        <i class="fas fa-plus text-xl"></i>
                    </button>
                </div>

                <div id="expense-form" class="hidden space-y-4 mb-8 p-6 bg-slate-50 rounded-3xl border border-slate-200">
                    <input type="text" id="exp-title" placeholder="é …ç›®ï¼šç¬¬ä¸€å¤©æ™šé¤"
                           class="w-full p-4 rounded-xl border border-slate-200 outline-none text-slate-800 focus:border-sky-300">
                    <input type="number" id="exp-amount" placeholder="é‡‘é¡ (æ—¥åœ“ Â¥)"
                           class="w-full p-4 rounded-xl border border-slate-200 outline-none text-slate-800 focus:border-sky-300" inputmode="numeric">
                    <button onclick="addExpense()" class="w-full gradient-blue text-white py-4 rounded-xl font-bold shadow-md btn-active">
                        æ–°å¢ç´€éŒ„
                    </button>
                </div>

                <div class="space-y-4" id="expense-list">
                    <div class="text-center py-20 text-slate-400">
                        <i class="fas fa-receipt text-5xl mb-4 opacity-20"></i>
                        <p>å°šç„¡æ”¯å‡ºç´€éŒ„</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 px-1 py-3 flex justify-between items-center shadow-[0_-8px_30px_rgb(0,0,0,0.06)] z-50">
        <button onclick="switchTab('itinerary')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all active" id="btn-itinerary" aria-label="è¡Œç¨‹">
            <i class="fas fa-calendar-alt text-lg"></i>
            <span class="text-[9px]">è¡Œç¨‹</span>
        </button>
        <button onclick="switchTab('night')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all" id="btn-night" aria-label="æ·±å¤œ">
            <i class="fas fa-moon text-lg"></i>
            <span class="text-[9px]">æ·±å¤œ</span>
        </button>
        <button onclick="switchTab('shopping')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all" id="btn-shopping" aria-label="å¿…è²·">
            <i class="fas fa-shopping-bag text-lg"></i>
            <span class="text-[9px]">å¿…è²·</span>
        </button>
        <button onclick="switchTab('calc')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all" id="btn-calc" aria-label="åŒ¯ç‡">
            <i class="fas fa-calculator text-lg"></i>
            <span class="text-[9px]">åŒ¯ç‡</span>
        </button>
        <button onclick="switchTab('prep')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all" id="btn-prep" aria-label="æº–å‚™">
            <i class="fas fa-suitcase text-lg"></i>
            <span class="text-[9px]">æº–å‚™</span>
        </button>
        <button onclick="switchTab('expenses')" class="nav-btn flex-1 flex flex-col items-center gap-1 text-slate-400 transition-all" id="btn-expenses" aria-label="è¨˜å¸³">
            <i class="fas fa-wallet text-lg"></i>
            <span class="text-[9px]">è¨˜å¸³</span>
        </button>
    </nav>

    <script>
        // ===== DATA =====
        const itineraryData = {
            1: {
                title: "é‚£éœ¸æŠµé”ãƒ»æ·±åº¦åˆé«”é©—",
                events: [
                    { time: "09:00", name: "æ©Ÿå ´æ¥é§è»Šé›†åˆ", type: "trans", desc: "è«‹æ–¼æŒ‡å®šåœ°é»é›†åˆï¼Œæº–æ™‚å‰å¾€æ©Ÿå ´ã€‚" },
                    { time: "13:30", name: "é£›æ©Ÿèµ·é£› (äºèˆª) ğŸ›«", type: "trans", desc: "AirAsia èˆªç­å‡ºç™¼ã€‚è«‹ç¢ºä¿å®Œæˆç¶²ä¸Šå ±åˆ°ã€‚" },
                    { time: "15:55", name: "æŠµé”é‚£éœ¸æ©Ÿå ´ (OKA) ğŸ›¬", type: "trans", desc: "æŠµé”å¾Œå‰å¾€åœ‹å…§ç·š 3 æ¨“ 6 è™Ÿå£ï¼Œæ­ä¹˜ç§Ÿè»Šå…¬å¸æ¥é§è»Šã€‚" },
                    { time: "18:30", name: "é‚£éœ¸å‡±æ‚…é…’åº— (Hyatt Regency Naha)", type: "stay", rating: 4.5, history: "é£¯åº—ä½è™•æ­·å²æ‚ ä¹…çš„å£ºå±‹å€é‚Šç·£ï¼Œå»ºç¯‰èåˆç¾ä»£ä¿è½èˆ‡ç‰çƒå‚³çµ±ç¾å­¸ã€‚å¤§å»³å±•ç¤ºå¤šä»¶ç‰çƒé™¶è—å®¶æ‰“é€ çš„è—è¡“å“ã€‚é£¯åº—å¾Œé–€ç›´é€šéµåµçŸ³é™¶å™¨è¡—ï¼Œæ˜¯æ„Ÿå—é‚£éœ¸æ–‡åŒ–è„ˆå‹•çš„çµ•ä½³èµ·é»ã€‚", lookout: "Check-in å¾Œæ¨è–¦å¾å¾Œé–€æ­¥è¡Œ 2 åˆ†é˜é€²å…¥é™¶å™¨è¡—è€å··å¼„ã€‚é£¯åº—å¤§å»³è£é£¾ä½¿ç”¨çš„ã€å£ºå±‹ç‡’ã€ç“·å™¨çš†ç‚ºåå¸«æ‰‹å·¥ç‡’è£½ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Hyatt+Regency+Naha+Okinawa" },
                    { time: "19:30", name: "ç›®åˆ©ãã®éŠ€æ¬¡ (æ–°éƒ½å¿ƒåº—)", type: "food", rating: 4.2, history: "å»ºç¯‰å¤–è§€ä»¿é€ å·¨å¤§çš„å¤æ³•é…’æ¡¶ï¼Œè±¡å¾µè‘—ã€é‘‘å®šä¹‹çœ¼ã€ã€‚ä¸»æ‰“ç”¢åœ°ç›´é€æµ·é®®ï¼Œæ°£æ°›å……æ»¿æ´»åŠ›ã€‚", lookout: "å¿…é» 500 æ—¥åœ“åˆºèº«ç››åˆã€‚è£æ½¢éå¸¸æœ‰æ…¶å…¸æ°›åœï¼Œ7 äººå®¶åº­ç”¨é¤é¦–é¸ã€‚", map: "https://www.google.com/maps/search/?api=1&query=ç›®åˆ©ãã®éŠ€æ¬¡+æ–°éƒ½å¿ƒåº—" }
                ]
            },
            2: {
                title: "åŒ—éƒ¨å·¡ç¦®ãƒ»è‡ªç„¶èˆ‡å¤å®¶",
                events: [
                    { time: "11:00", name: "Captain Kangaroo Hamburger", type: "food", rating: 4.6, history: "æ›¾ç²é¸æ—¥æœ¬å…¨åœ‹æ¼¢å ¡å‰ååã€‚å…¶æ¼¢å ¡çš®æ¡ç‰¹æ®Šã€å£“çƒ¤ã€å·¥è—ï¼Œå£æ„Ÿç„¦é¦™é…¥è„†ã€‚ä»£è¡¨æˆ°å¾Œæ²–ç¹©æ··è¡€æ–‡åŒ–çš„ç¾é£Ÿæ¨™ç«¿ã€‚", lookout: "å¿…é» Sparky Burgerã€‚11:00 æº–æ™‚å ±åˆ°æ˜¯é¿é–‹ä¸€å°æ™‚äººæ½®å”¯ä¸€æ–¹æ³•ã€‚æ­¤æ™‚è»Šå…§ç„¡è¡Œæä¹˜å®¢æœ€èˆ’é©ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Captain+Kangaroo+Okinawa" },
                    { time: "12:45", name: "å¤å®‡åˆ©å¤§æ©‹ & å¤å®‡åˆ©å³¶", type: "spot", rating: 4.7, history: "æ²–ç¹©æœ€é•·è·¨æµ·æ©‹ã€‚å¤ç¨±æˆ€ä¹‹å³¶ï¼Œæœ‰å§‹ç¥–ç¥è©±ã€‚æµ·æ°´é€æ˜æ„Ÿå³ç‚ºè‘—åçš„ã€Œå¤å®‡åˆ©è—ã€ã€‚", map: "https://www.google.com/maps/search/?api=1&query=å¤å®‡åˆ©å¤§æ©‹" },
                    { time: "14:30", name: "ç¾éº—æµ·æ°´æ—é¤¨", type: "spot", rating: 4.6, history: "æ ¸å¿ƒã€é»‘æ½®ä¹‹æµ·ã€ä¸»ç¼¸è¦æ¨¡å…¨çƒé ‚å°–ã€‚15:00 é¯¨é¯Šé¤µé£Ÿç§€å¿…çœ‹ï¼å°å­©å¯å»è§¸æ‘¸æ± æ„Ÿå—æµ·æ´‹ç”Ÿç‰©ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Okinawa+Churaumi+Aquarium" },
                    { time: "18:30", name: "ç™¾å¹´å¤å®¶ å¤§å®¶ (Ufuya) æ™šé¤", type: "food", rating: 4.4, history: "éš±èº«åè­·å±±é–“çš„ç™¾å¹´å¤å®…ã€‚ä¸»æ‰“é˜¿å¤è±¬ (Agu Pork)ï¼Œæ²¹è„‚ç”˜ç”œï¼Œç’°å¢ƒå¤è‰²å¤é¦™ã€‚", lookout: "é˜¿å¤è±¬æ¶®æ¶®é‹æ˜¯éˆé­‚ã€‚ç”¨é¤å€ä¼´éš¨è‘—åº­åœ’ç€‘å¸ƒè²ï¼Œæ°£æ°›æ¥µä½³ä¸”é©åˆå®¶æ—èšé¤ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Ufuya+Okinawa" }
                ]
            },
            3: {
                title: "ä¸­éƒ¨é¢¨æƒ…ãƒ»ç‡’è‚‰ç››å®´",
                events: [
                    { time: "10:30", name: "ç¾åœ‹æ‘ American Village", type: "spot", rating: 4.3, history: "å±•ç¾æ²–ç¹©äºŒæˆ°å¾Œã€æ··è¡€æ–‡åŒ–ã€çš„ç¸®å½±ï¼ŒDepot Island å€æ˜¯æ‹ç…§å‹åœ°ã€‚æˆ°åˆ©å“å¯ç›´æ¥å¡å…¥é£¯åº—ã€‚", map: "https://www.google.com/maps/search/?api=1&query=American+Village" },
                    { time: "12:00", name: "Pet Box ç¾æ¿±åº— (å¯µç‰©ç²¾å“)", type: "shop", rating: 4.5, history: "æ²–ç¹©æœ€å¤§å¯µç‰©ç™¾è²¨ã€‚æœ‰å„ç¨®æ—¥æœ¬è£½ç²¾ç·»å¯µç‰©é£Ÿå“ã€æœé£¾èˆ‡ç©å…·ã€‚6 æ­²å°å­©ä¹Ÿæœƒåœ¨æ°´æ—å€ç©å¾—é–‹å¿ƒã€‚", lookout: "æ—¥æœ¬å¯µç‰©é›¶é£Ÿè£½ä½œç²¾ç¾ï¼Œé€çµ¦é¤Šå¯µç‰©çš„æœ‹å‹é¦–é¸ã€‚é€™å®¶å°±åœ¨ç¾åœ‹æ‘å°é¢ï¼Œéå¸¸é †è·¯ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Pet+Box+Mihama" },
                    { time: "13:00", name: "è¿´è½‰å£½å¸å¸‚å ´ (å¸‚å ´ç¾æ¿±åº—)", type: "food", rating: 4.3, history: "ç¾åœ‹æ‘è¶…å¤¯è¿´è½‰å£½å¸ã€‚é£Ÿæä»¥åœ¨åœ°æ¼ç²ç‚ºä¸»ï¼Œé»é¤ç³»çµ±æä¾›å¤šåœ‹èªè¨€ã€‚", lookout: "å¿…åƒç‚™ç‡’é®­é­šèˆ‡åœ¨åœ°é®®é­šã€‚å¹³æ¿é»é¤å°å°å­©ä¾†èªªéå¸¸æœ‰è¶£ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Gourmet+Kaiten-Sushi+Ichiba+Chatan" },
                    { time: "15:30", name: "æ¼«ç•«å€‰åº« é‚£éœ¸åº— (æŒ–å¯¶å»ºè­°)", type: "shop", rating: 4.1, history: "æ²–ç¹©æœ€å¤§äºŒæ‰‹åº—ã€‚å¾ç²¾å“åŒ…ã€é›»ç©ã€é‡£å…·æ‡‰æœ‰ç›¡æœ‰ã€‚å…¨å®¶å„å–æ‰€éœ€çš„å¥½å»è™•ã€‚", lookout: "å…¥å£åç‰Œæ«ƒæœ‰ç‹€æ³æ¥µä½³çš„ä¸­å¤ç²¾å“ã€‚å°å­©åœ¨ç©å…·å€æœƒç˜‹æ‰ï¼Œè¡Œæç•™åœ¨é£¯åº—è³¼ç‰©ç„¡è² æ“”ã€‚", map: "https://www.google.com/maps/search/?api=1&query=æ¼«ç•«å€‰åº«+é‚£éœ¸åº—" },
                    { time: "18:30", name: "ç‡’è‚‰æœ¬éƒ¨ç‰§å ´ (é‚£éœ¸åº—)", type: "food", rating: 4.5, history: "è‡ªå®¶åŸ¹è‚²æœ¬éƒ¨ç‰›ï¼Œæ›¾åœ¨å…¨æ—¥æœ¬å’Œç‰›å¤§è³½ç²çã€‚é‚£éœ¸åº—äº¤é€šä¾¿åˆ©ï¼Œé©åˆæ…¶ç¥ä¹‹æ—…ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Motobu+Farm+Yakiniku+Naha" }
                ]
            },
            4: {
                title: "å—éƒ¨æ·±åº¦ãƒ»æ»¿è¼‰æ­¸å®¶",
                events: [
                    { time: "09:00", name: "å£ºå±‹ Yachimun é€š", type: "spot", rating: 4.3, history: "éµåµçŸ³è¡—é“å·²æœ‰ 300 å¤šå¹´æ­·å²ã€‚æ™¨é–“æ•£æ­¥æ„Ÿå—é‚£éœ¸å¯§éœã€‚éš¨å¾Œå›é£¯åº— Check-outã€‚", map: "https://www.google.com/maps/search/?api=1&query=å£ºå±‹é™¶å™¨è¡—" },
                    { time: "10:30", name: "æ³¢ä¸Šå®®", type: "spot", rating: 4.4, history: "å»ºåœ¨çŠç‘šç¤æ‡¸å´–ä¸Šï¼Œå®ˆè­·é‚£éœ¸æ¸¯å¹³å®‰ã€‚æµ·æ°´æ¥µæ¸…æ¾ˆã€‚æ¨è–¦è²·å°æ›¸åŒ…å¾¡å®ˆçµ¦å°å­©ã€‚", map: "https://www.google.com/maps/search/?api=1&query=æ³¢ä¸Šå®®" },
                    { time: "12:00", name: "ç‰æ³‰æ´ (æ²–ç¹©ä¸–ç•Œ)", type: "spot", rating: 4.3, history: "æ—¥æœ¬è¦æ¨¡æœ€å¤§é˜ä¹³çŸ³æ´ã€‚æ­·ç¶“ 30 è¬å¹´å½¢æˆã€‚13:30 å¤ªé¼“è¡¨æ¼”å¿…çœ‹ï¼éœ‡æ’¼éˆé­‚ã€‚", map: "https://www.google.com/maps/search/?api=1&query=ç‰æ³‰æ´" },
                    { time: "15:00", name: "Ashibinaa Outlet", type: "shop", rating: 3.9, history: "å¸Œè‡˜é¢¨æ ¼è¨­è¨ˆï¼Œæœ€å¾Œæ¡è³¼è–åœ°ã€‚é›¢æ©Ÿå ´åƒ… 15 åˆ†é˜ã€‚æ•´ç†æˆ°åˆ©å“èˆ‡è¡Œæè£è»Šã€‚", map: "https://www.google.com/maps/search/?api=1&query=Ashibinaa+Outlet" },
                    { time: "19:00", name: "â›½ æ»¿æ²¹é‚„è»ŠæœŸé™", type: "trans", desc: "å›ç¨‹èˆªç­ 21:30ã€‚è«‹æ–¼ 19:00 å‰æŠµé”è±å´åŠ æ²¹ç«™åŠ æ»¿æ²¹ä¸¦é‚„è»Šã€‚" },
                    { time: "21:30", name: "è™èˆªèµ·é£› ğŸ›«", type: "trans", desc: "å¸¶è‘—å›æ†¶æ­¸å®¶ã€‚è™èˆª IT231 èˆªç­ã€‚" }
                ]
            }
        };

        const nightData = {
            shopping: [
                { name: "Union è¶…å¸‚ (ç‰§å¿—åº—)", desc: "åœ¨åœ°äººé¦–é¸ï¼Œé£²ç”¨æ°´èˆ‡é®®ä¹³æœ€åˆ’ç®—ï¼ŒåŠåƒ¹ä¾¿ç•¶è–åœ°ã€‚", type: "24H", walk: "10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Union+Makishi" },
                { name: "å”å‰è¨¶å¾· åœ‹éš›é€šåº—", desc: "å…¨é‚£éœ¸æœ€å¤§è³¼ç‰©é»ï¼Œ1æ¨“ç‰¹ç”¢2æ¨“è—¥å¦ï¼Œå‡Œæ™¨é€€ç¨…å¿«ã€‚", type: "24H", walk: "5åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Don+Quijote+Kokusai+Dori" },
                { name: "MaxValu 24h (æ¾å±±åº—)", desc: "æ——è‰¦è¶…å¸‚ï¼Œç†Ÿé£Ÿç¨®é¡æ¥µå¤šï¼Œé©åˆå¸¶å®µå¤œå›é£¯åº—ã€‚", type: "24H", walk: "15åˆ†", map: "https://www.google.com/maps/search/?api=1&query=MaxValu+Matsuyama" },
                { name: "Manga Souko (æ¼«ç•«å€‰åº«)", desc: "äºŒæ‰‹ç²¾å“/å…¬ä»”/é›»ç©å¯¶åº«ï¼Œå¤§äººå°å­©æ¢éšªé¦–é¸ã€‚", type: "24H", walk: "è»Šç¨‹10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Manga+Souko+Naha" },
                { name: "Drug Eleven (è—¥å¦)", desc: "å…¥å£è™•è—¥å“å›¤è²¨é¦–é¸ï¼Œç‡Ÿæ¥­è‡³æ·±å¤œ 24:00ã€‚", type: "æ·±å¤œ", walk: "8åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Drug+Eleven+Naha" },
                { name: "Satudora (æœ­å¹Œè—¥å¦)", desc: "å¯¬æ•å¥½é€›ä¸æ“æ“ ï¼Œè—¥å¦å“é …éå¸¸å…¨ï¼Œè‡³ 23:00ã€‚", type: "æ·±å¤œ", walk: "10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Satudora+Naha+Kokusai+Dori" },
                { name: "Aeon é‚£éœ¸ (è¶…å¸‚)", desc: "ç™¾è²¨å‹è¶…å¸‚ï¼Œå“è³ªç©©å®šï¼Œå“é …æ¥µè±å¯Œè‡³ 24:00ã€‚", type: "æ·±å¤œ", walk: "è»Šç¨‹8åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Aeon+Naha" },
                { name: "å¤§åœ‹è—¥å¦ (ä¸­å¤®åº—)", desc: "åƒ¹æ ¼æ¥µå…·ç«¶çˆ­åŠ›ï¼Œæœ‰ä¸­æ–‡åº—å“¡æœå‹™ï¼Œè‡³ 23:00ã€‚", type: "æ·±å¤œ", walk: "7åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Daikoku+Drug+Kokusai+Dori" },
                { name: "Lawson 24H (å‡±æ‚…æ—)", desc: "é£¯åº—é–€å£ã€‚è£œçµ¦ä¾¿åˆ©å•†åº—é™å®šå†°å“èˆ‡ç‚¸é›ã€‚", type: "24H", walk: "2åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Lawson+Naha+Hyatt" },
                { name: "FamilyMart 24H", desc: "åœ‹éš›é€šè·¯å£ã€‚é™å®šæ¬¾æ³¡ç››å’–å•¡è£œçµ¦ç«™ã€‚", type: "24H", walk: "4åˆ†", map: "https://www.google.com/maps/search/?api=1&query=FamilyMart+Kokusai+Dori" }
            ],
            food: [
                { name: "æš–æš®æ‹‰éºµ (ç‰§å¿—åº—)", desc: "è‡³ 02:00 AMï¼Œä¹å·å† è»ã€‚æ·±å¤œæ’éšŠå°‘å¾ˆå¤šã€‚", kid: "OK", walk: "8åˆ†", map: "https://www.google.com/maps/search/?api=1&query=æš–æš®+é‚£éœ¸" },
                { name: "ä¸€è˜­æ‹‰éºµ åœ‹éš›é€šåº—", desc: "è‡³ 06:00 AMï¼ŒåŒ…å»‚æ„Ÿå¼·ï¼Œå®‰éœåƒå®µå¤œé¦–é¸ã€‚", kid: "OK", walk: "6åˆ†", map: "https://www.google.com/maps/search/?api=1&query=ä¸€è˜­+é‚£éœ¸" },
                { name: "Mikado (ã¿ã‹ã©) é£Ÿå ‚", desc: "è‡³ 02:00 AMï¼Œæ²–ç¹©ä»€éŒ¦ç‡´é£¯éˆé­‚é£Ÿå ‚ã€‚", kid: "å¤§æ¨", walk: "12åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Mikado+Naha" },
                { name: "æœç„¶ç‰›æ’ (Yappari)", desc: "è‡³ 02:00 AMï¼Œç†”å²©çŸ³æ¿è‡ªåŠ©å§ï¼ŒCPå€¼çˆ†è¡¨ã€‚", kid: "OK", walk: "10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Yappari+Steak+Naha" },
                { name: "Steak House 88", desc: "è‡³ 23:00 PMï¼Œåœ¨åœ°è€ç‰Œç‰›æ’ï¼Œå…’ç«¥é¤å„ªç§€ã€‚", kid: "æ¨è–¦", walk: "12åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Steak+House+88+International+St" },
                { name: "åº·é¾æ‹‰éºµ (Kouryu)", desc: "è‡³ 05:00 AMï¼Œå®¢è£½åŒ–å£å‘³ï¼Œç´°éºµæ§æœ€æ„›ã€‚", kid: "OK", walk: "5åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Kouryu+Naha" },
                { name: "åœ‹éš›é€šå±‹å°æ‘", desc: "ç´„ 24:00ã€‚æˆ¶å¤–æ…¶å…¸æ„Ÿã€‚20é–“ç‰¹è‰²å°åº—ã€‚", kid: "æ°£åˆ†ä½³", walk: "5åˆ†", map: "https://www.google.com/maps/search/?api=1&query=åœ‹éš›é€šå±‹å°æ‘" },
                { name: "ä¸²è§’ (Kushikado)", desc: "è‡³ 02:00 AMã€‚ä¸²ç‡’æ”¾é¡Œèˆ‡é…’æ”¾é¡Œè–åœ°ã€‚", kid: "è¼ƒåµ", walk: "10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=ä¸²è§’+ä¹…èŒ‚åœ°" },
                { name: "æ³¢ç…§é–“å±…é…’å±‹", desc: "è‡³ 24:00ã€‚æ™šä¸Šæœ‰ä¸‰ç·šç´ç¾å ´æ¼”å¥ã€‚", kid: "OK", walk: "8åˆ†", map: "https://www.google.com/maps/search/?api=1&query=æ³¢ç…§é–“+é‚£éœ¸" },
                { name: "å‚‘å…‹ç‰›æ’ (Jack's)", desc: "è‡³ 22:30ã€‚å‚³å¥‡ç‰›æ’ã€‚æ·±å¤œä¸€è©¦çš„é©šè‰·å‘³ã€‚", kid: "OK", walk: "è»Šç¨‹5åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Jack's+Steak+House+Naha" }
            ],
            dessert: [
                { name: "Blue Seal åœ‹éš›é€šåº—", desc: "è‡³ 22:30ã€‚å¿…åƒç´…èŠ‹ã€é¹½ç‰›å¥¶å†°æ·‡æ·‹ã€‚", walk: "5åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Blue+Seal+Kokusai+Dori" },
                { name: "é¹½å±‹ (Yukisio)", desc: "è‡³ 22:00ã€‚é›ªé¹½éœœæ·‡æ·‹ã€‚å¯æ’’ç‰¹è£½å‘³é¹½ã€‚", walk: "7åˆ†", map: "https://www.google.com/maps/search/?api=1&query=é¹½å±‹+é‚£éœ¸" },
                { name: "McDonald's 24H", desc: "é™å®šæ¬¾å¡”å¯å ¡ã€‚æ·±å¤œæ´¾èˆ‡é›å¡Šéš¨æ™‚æœ‰ã€‚", walk: "8åˆ†", map: "https://www.google.com/maps/search/?api=1&query=McDonald's+Naha" },
                { name: "LAWSON å­£ç¯€ç”œå“", desc: "æ·±å¤œå†°æ«ƒé™å®šï¼šç‰¹è£½å¡”é¡èˆ‡å†°æ·‡æ·‹ã€‚", walk: "2åˆ†", map: "https://www.google.com/maps/search/?api=1&query=Lawson+Okinawa" },
                { name: "è¶…å¸‚ç†Ÿé£Ÿå€ç”œé»", desc: "MaxValu æ·±å¤œã€‚æŠ˜æ‰£å’Œè“å­å›¤è²¨å¿…çœ‹ã€‚", walk: "10åˆ†", map: "https://www.google.com/maps/search/?api=1&query=MaxValu+Matsuyama" }
            ]
        };

        const shoppingData = {
            special: [
                { name: "ç´…èŠ‹å¡” (å¾¡è“å­å¾¡æ®¿)", icon: "ğŸ ", desc: "æ²–ç¹© No.1ã€‚åŠ ç†±åƒåƒç¾çƒ¤ã€‚" },
                { name: "å—é¢¨å ‚ è¾£å‘³è¦é¤…", icon: "ğŸ¦", desc: "å£æ„Ÿè„†è¾£ã€‚è¾¦å…¬å®¤åˆ†é€ç¥å“ã€‚" },
                { name: "å®®å¤å³¶ é›ªé¹½ç³»åˆ—", icon: "ğŸ§‚", desc: "é«˜å“è³ªé‡‘æ¥šç³•ã€æ´—é¡ç²‰ã€‚" },
                { name: "Orion è¯åè±†è“å­", icon: "ğŸ¥œ", desc: "ä¸‰ç¨®å£å‘³æ··åˆï¼Œå¤§äººä¸‹é…’ç¥ç‰©ã€‚" },
                { name: "é‚ŠéŠ€é£Ÿå ‚ è¾£æ¤’æ²¹", icon: "ğŸŒ¶ï¸", desc: "çŸ³å£å³¶åç”¢ã€‚æ‹Œéºµæ²¾é¤ƒç¥é…è§’ã€‚" },
                { name: "æ²–ç¹©è•éº¥éºµæ³¡éºµ", icon: "ğŸœ", desc: "æ˜æ˜Ÿé£Ÿå“å‡ºå“ã€‚å…§é™„åšå¯¦è‚‰å¡Šã€‚" },
                { name: "çŸ³å£ç‰›ä»™è²", icon: "ğŸ¥©", desc: "è‚‰å‘³æ¿ƒåšã€‚é™å®šä¼´æ‰‹ç¦®ç›’ã€‚" },
                { name: "æ®˜æ³¢ æ³¡ç››é…’", icon: "ğŸ¶", desc: "ç™½æ®˜æ³¢æœ€å—å¥½è©•ï¼Œå£æ„Ÿæ¸…çˆ½ã€‚" },
                { name: "å£ºå±‹ç‡’ é¢¨ç…çˆº", icon: "ğŸ¦", desc: "æ‰‹å·¥é™¶è—ã€‚æ‹›è²¡å®ˆè²¡è±¡å¾µã€‚" },
                { name: "é»‘ç³–æ–¹å¡Š (æ³¢ç…§é–“)", icon: "ğŸ¬", desc: "å¤©ç„¶é¢¨å‘³ã€‚å¯Œå«ç¤¦ç‰©è³ªã€‚" }
            ],
            pharmacy: [
                { name: "LuLuLun æ²–ç¹©é¢è†œ", desc: "è‹¦ç“œã€æ‰¶æ¡‘èŠ±ã€è¥¿å°åº¦æ«»æ¡ƒé™å®šã€‚" },
                { name: "Chulacos å¹¼ç¾è‚Œ", desc: "è§£æ±ºçš®è†šè‚‰èŠ½å›°æ“¾çš„å…¨èƒ½å‡éœœã€‚" },
                { name: "æœˆæ¡ƒæ°´ä¿é¤Š", desc: "æŠ—è¡°è€è–å“ã€‚ä¿æ¿•åŠ›ä¿®å¾©åŠ›æ¥µå¼·ã€‚" },
                { name: "åˆåˆ©ä»–å‘½ EX Plus", desc: "é•·è¼©å¿…å›¤ã€‚å¤§åœ‹è—¥å¦çµ„åˆåƒ¹æœ€æ®ºã€‚" },
                { name: "ä¼‘è¶³æ™‚é–“/è’¸æ°£çœ¼ç½©", desc: "è¡Œç¨‹èˆ’ç·©ã€‚æ¯å¤©ç¡å‰è²¼ä¸€å¸–ã€‚" },
                { name: "ANESSA é˜²æ›¬å¤§çµ„", desc: "æ²–ç¹©ç´«å¤–ç·šå¼·ã€‚è—¥å¦åº—æœ‰å›¤è²¨åŒ…ã€‚" },
                { name: "EVE æ­¢ç—›è—¥ (è—)", desc: "æœ‰æ•ˆèˆ’ç·©é ­ç—›ç¶“ç—›ï¼Œå‚™ç”¨é¦–é¸ã€‚" },
                { name: "å¤§æ­£æ„Ÿå†’è—¥ (é‡‘)", desc: "ç²‰æœ«å¼å¸æ”¶å¿«ã€‚å®¶ä¸­å‚™ç”¨ç¬¬ä¸€ã€‚" },
                { name: "é¾è§’æ•£ ç²‰æœ«/ç³–", desc: "æ½¤å–‰å¿…å‚™ã€‚å„é¡å£å‘³é½Šå…¨ã€‚" },
                { name: "æ²–ç¹©æµ·æ³¥æ´—é¢ä¹³", desc: "æ·±å±¤æ¸…æ½”ã€‚æ´—å¾Œä¹¾æ·¨ä¸ç·Šç¹ƒã€‚" }
            ],
            conv: [
                { name: "Lawson ç‚¸é›å›", icon: "ğŸ—", desc: "æ—¨è¾£ã€èµ·å¸å‘³ã€‚è»Šä¸Šé›¶å˜´ NO.1ã€‚" },
                { name: "Orion é™å®šç½è£å•¤", icon: "ğŸº", desc: "æ¯å­£è¨­è¨ˆä¸åŒã€‚æ”¶è—åƒ¹å€¼é«˜ã€‚" },
                { name: "å…¨å®¶ è±¬è‚‰è›‹é£¯ç³°", icon: "ğŸ™", desc: "æ²–ç¹©æ—©é¤é¦–é¸ã€‚åšè›‹åˆé¤è‚‰ã€‚" },
                { name: "æ³¡ç››å’–å•¡ (å†·è—)", icon: "â˜•", desc: "FamilyMart ç¨è³£ã€‚å¾®é†ºæ„Ÿå¿…è©¦ã€‚" },
                { name: "æ˜æ²» æ²–ç¹©é®®ä¹³", icon: "ğŸ¥›", desc: "åœ¨åœ°è¾²å ´ä¹³æºã€‚æ¯å¤©æ—©ä¸Šå¿…å–ã€‚" },
                { name: "Orion Watta è˜‡æ‰“", icon: "ğŸ¹", desc: "ä½é…’ç²¾æ°£æ³¡é£²ã€‚æ²–ç¹©æª¸æª¬å£å‘³æ¨ã€‚" },
                { name: "ç´…èŠ‹ Pocky (å·¨)", icon: "ğŸ¥–", desc: "ç´®å¯¦ç´…èŠ‹é¦™ã€‚æ¯”ä¸€èˆ¬ç²— 3 å€ã€‚" },
                { name: "é»‘ç³–æ‹¿éµé£²æ–™", icon: "ğŸ¥¤", desc: "æ¿ƒéƒé»‘ç³–å¥¶ã€‚ä¸‹åˆæç¥å¥½ç‰©ã€‚" },
                { name: "é»‘ç³–é¤…ä¹¾ (ç™¾å…ƒå°ˆå€)", icon: "ğŸª", desc: "ä¾¿å®œåˆå¥½å‘³ã€‚è¶…å•†å›¤è²¨å¿…æ¶ã€‚" },
                { name: "å³¶è¾£æ¤’ç‚¸é›æ£’", icon: "ğŸŒ¶ï¸", desc: "Lawson é™å®šã€‚è¾›å£åˆºæ¿€éå¸¸çˆ½å£ã€‚" }
            ]
        };

        // ===== CONSTANTS =====
        const JPY_RATE = 0.21;
        const TAB_TITLES = {
            itinerary: 'æ²–ç¹©æ·±åº¦ä¹‹æ—…',
            night: 'æ·±å¤œæ¢ç´¢',
            shopping: 'æ²–ç¹©å¿…è²·',
            calc: 'åŒ¯ç‡æ›ç®—',
            prep: 'è¡Œå‰æº–å‚™',
            expenses: 'æ—…è²»è¨˜å¸³'
        };

        // ===== STATE =====
        let expenses = JSON.parse(localStorage.getItem('okinawa_expenses') || '[]');

        // ===== TAB NAVIGATION =====
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`tab-${tabId}`).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(`btn-${tabId}`).classList.add('active');
            document.getElementById('page-title').innerText = TAB_TITLES[tabId];
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ===== ITINERARY =====
        function showDay(day) {
            document.querySelectorAll('.day-tab').forEach(el => el.classList.remove('active'));
            document.getElementById(`day-${day}`).classList.add('active');

            const dayData = itineraryData[day];
            const container = document.getElementById('itinerary-list');

            container.innerHTML = dayData.events.map((ev, idx) => {
                const borderColor = ev.type === 'food' ? 'border-orange-400' :
                                   ev.type === 'stay' ? 'border-purple-400' :
                                   ev.type === 'shop' ? 'border-pink-400' : 'border-sky-600';

                return `
                <div class="bg-white rounded-3xl p-6 shadow-sm border-l-8 ${borderColor} transition-all card-hover">
                    <div class="flex justify-between items-start mb-3">
                        <span class="text-[10px] font-bold bg-slate-100 px-3 py-1 rounded-full">${ev.time}</span>
                        ${ev.rating ? `<span class="text-amber-500 text-xs font-bold bg-amber-50 px-2 py-1 rounded-lg"><i class="fas fa-star"></i> ${ev.rating}</span>` : ''}
                    </div>
                    <h3 class="font-bold text-slate-800 text-lg mb-3">${ev.name}</h3>
                    ${ev.desc ? `<p class="text-xs text-slate-500 mb-4 leading-relaxed">${ev.desc}</p>` : ''}
                    ${ev.map ? `
                    <div class="flex gap-3 mb-4">
                        <a href="${ev.map}" target="_blank" rel="noopener" class="flex-1 text-center py-3 bg-sky-50 text-sky-700 rounded-2xl text-xs font-bold border border-sky-100 shadow-sm btn-active">
                            <i class="fas fa-location-arrow"></i> åœ°åœ–
                        </a>
                        ${ev.history ? `<button onclick="toggleHistory(${day}, ${idx})" class="flex-1 text-center py-3 bg-slate-50 text-slate-600 rounded-2xl text-xs font-bold border border-slate-100 shadow-sm btn-active">æ·±åº¦å°è¦½</button>` : ''}
                    </div>` : ''}
                    <div id="hist-${day}-${idx}" class="collapsible-content">
                        <div class="p-5 bg-sky-50 rounded-2xl text-[11px] text-slate-600 leading-relaxed border border-sky-100 mb-2">
                            <p class="mb-3"><span class="font-bold text-sky-800 block mb-1 underline decoration-sky-200">ã€æ­·å²èˆ‡èƒŒæ™¯ã€‘</span>${ev.history || ''}</p>
                            ${ev.lookout ? `<p class="bg-white p-3 rounded-xl shadow-sm text-slate-700"><span class="font-bold text-sky-900 block mb-1"><i class="fas fa-eye text-sky-600"></i> åœ°é™ªæ¨è–¦ï¼š</span>${ev.lookout}</p>` : ''}
                        </div>
                    </div>
                </div>`;
            }).join('');
        }

        function toggleHistory(day, idx) {
            document.getElementById(`hist-${day}-${idx}`).classList.toggle('show');
        }

        // ===== NIGHTLIFE =====
        function renderNight() {
            const renderItem = (item) => `
                <div class="bg-white p-5 rounded-3xl shadow-sm border border-slate-100 card-hover">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-slate-800 text-sm">${item.name}</h4>
                        <span class="${item.type === '24H' ? 'badge-late' : 'badge-kid'}">${item.type || 'ç”œé»'}</span>
                    </div>
                    <p class="text-xs text-slate-500 mb-3">${item.desc}</p>
                    <div class="flex justify-between items-center text-[10px] text-slate-400 mb-4 italic">
                        <span>ğŸ‘£ ${item.walk}</span>
                        <span>å°å­©: ${item.kid || 'OK'}</span>
                    </div>
                    <a href="${item.map}" target="_blank" rel="noopener" class="block w-full text-center py-2 bg-indigo-50 text-indigo-700 rounded-xl text-[10px] font-bold border border-indigo-100 transition-all btn-active shadow-sm">
                        <i class="fas fa-location-arrow"></i> é–‹å•Ÿåœ°åœ–å°èˆª
                    </a>
                </div>`;

            document.getElementById('night-shopping').innerHTML = nightData.shopping.map(renderItem).join('');
            document.getElementById('night-food').innerHTML = nightData.food.map(renderItem).join('');
            document.getElementById('night-dessert').innerHTML = nightData.dessert.map(renderItem).join('');
        }

        // ===== SHOPPING =====
        function renderShopping() {
            document.getElementById('shop-special').innerHTML = shoppingData.special.map(s => `
                <div class="flex gap-4 items-start card-hover bg-white p-4 rounded-2xl border border-slate-100">
                    <div class="w-16 h-16 bg-pink-50 rounded-2xl flex-shrink-0 flex items-center justify-center text-2xl">${s.icon}</div>
                    <div>
                        <h4 class="font-bold text-slate-800 text-sm">${s.name}</h4>
                        <p class="text-[10px] text-slate-500 mt-1">${s.desc}</p>
                    </div>
                </div>`).join('');

            document.getElementById('shop-pharmacy').innerHTML = shoppingData.pharmacy.map(p => `
                <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                    <h4 class="font-bold text-slate-800 mb-1 text-[11px]">${p.name}</h4>
                    <p class="text-[9px] text-slate-500">${p.desc}</p>
                </div>`).join('');

            document.getElementById('shop-conv').innerHTML = shoppingData.conv.map(c => `
                <div class="bg-white p-3 rounded-xl border border-slate-100 flex items-center gap-3 shadow-sm card-hover">
                    <span class="text-lg">${c.icon}</span>
                    <div>
                        <h4 class="font-bold text-[11px]">${c.name}</h4>
                        <p class="text-[9px] text-slate-500">${c.desc}</p>
                    </div>
                </div>`).join('');
        }

        // ===== CALCULATOR =====
        function convert(from) {
            const jpyEl = document.getElementById('jpy-input');
            const twdEl = document.getElementById('twd-input');

            if (from === 'jpy') {
                const jpy = parseFloat(jpyEl.value) || 0;
                twdEl.value = jpy ? Math.round(jpy * JPY_RATE) : '';
            } else {
                const twd = parseFloat(twdEl.value) || 0;
                jpyEl.value = twd ? Math.round(twd / JPY_RATE) : '';
            }
        }

        // ===== EXPENSES =====
        function toggleExpenseForm() {
            document.getElementById('expense-form').classList.toggle('hidden');
        }

        function addExpense() {
            const titleEl = document.getElementById('exp-title');
            const amountEl = document.getElementById('exp-amount');
            const title = titleEl.value.trim();
            const amount = parseInt(amountEl.value);

            if (!title || !amount || amount <= 0) {
                alert('è«‹å¡«å¯«é …ç›®åç¨±èˆ‡æœ‰æ•ˆé‡‘é¡');
                return;
            }

            expenses.push({
                title,
                amount,
                timestamp: Date.now()
            });

            // Save to localStorage
            localStorage.setItem('okinawa_expenses', JSON.stringify(expenses));

            titleEl.value = '';
            amountEl.value = '';
            toggleExpenseForm();
            renderExpenses();
        }

        function deleteExpense(idx) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†æ”¯å‡ºå—ï¼Ÿ')) {
                expenses.splice(idx, 1);
                localStorage.setItem('okinawa_expenses', JSON.stringify(expenses));
                renderExpenses();
            }
        }

        function renderExpenses() {
            const list = document.getElementById('expense-list');
            const totalEl = document.getElementById('total-expense');
            const totalTwdEl = document.getElementById('total-twd');
            const total = expenses.reduce((sum, item) => sum + item.amount, 0);

            totalEl.innerText = `Â¥ ${total.toLocaleString()}`;
            totalTwdEl.innerText = `â‰ˆ NT$ ${Math.round(total * JPY_RATE).toLocaleString()}`;

            if (expenses.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-20 text-slate-400">
                        <i class="fas fa-receipt text-5xl mb-4 opacity-20"></i>
                        <p>å°šç„¡æ”¯å‡ºç´€éŒ„</p>
                    </div>`;
                return;
            }

            list.innerHTML = expenses.map((item, idx) => `
                <div class="flex justify-between items-center bg-slate-50 p-5 rounded-3xl border border-slate-100 mb-3 shadow-sm">
                    <div class="flex items-center gap-4">
                        <button onclick="deleteExpense(${idx})" class="text-slate-300 hover:text-red-400 transition-colors" aria-label="åˆªé™¤">
                            <i class="fas fa-times-circle text-lg"></i>
                        </button>
                        <span class="text-sm font-bold">${item.title}</span>
                    </div>
                    <div class="text-right">
                        <span class="font-bold text-sky-800 text-sm block">Â¥ ${item.amount.toLocaleString()}</span>
                        <span class="text-[10px] text-slate-400">â‰ˆ $${Math.round(item.amount * JPY_RATE).toLocaleString()}</span>
                    </div>
                </div>`).join('');
        }

        // ===== INITIALIZATION =====
        window.onload = () => {
            showDay(1);
            renderNight();
            renderShopping();
            renderExpenses();
        };
    </script>
</body>
</html>
